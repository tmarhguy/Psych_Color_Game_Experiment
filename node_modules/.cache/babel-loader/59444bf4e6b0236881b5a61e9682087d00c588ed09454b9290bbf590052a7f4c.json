{"ast":null,"code":"var _jsxFileName = \"/Users/tyronemarhguy/Desktop/Color-Comm-Game-Psych-Experiment/src/components/AnimalGrid.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AnimalGrid({\n  animals,\n  refreshPositions,\n  onAnimalSelect\n}) {\n  _s();\n  const [randomizedAnimals, setRandomizedAnimals] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(0); // Track the currently selected animal\n\n  // Helper function to check if two positions overlap\n  const isOverlapping = (newAnimal, existingAnimals, buffer = 10) => {\n    return existingAnimals.some(animal => {\n      const distanceX = Math.abs(newAnimal.left - animal.left);\n      const distanceY = Math.abs(newAnimal.top - animal.top);\n      return distanceX < buffer && distanceY < buffer; // Check if bounding boxes overlap\n    });\n  };\n\n  // Function to randomize positions of animals without overlaps\n  const randomizePositions = () => {\n    const randomized = [];\n    animals.forEach(animal => {\n      let newAnimal;\n      let attempts = 0;\n      do {\n        newAnimal = {\n          ...animal,\n          top: Math.random() * 80 + 10,\n          // Random top position (10% to 90%)\n          left: Math.random() * 80 + 10 // Random left position (10% to 90%)\n        };\n        attempts++;\n      } while (isOverlapping(newAnimal, randomized) && attempts < 100); // Retry if overlapping\n      randomized.push(newAnimal);\n    });\n    setRandomizedAnimals(randomized);\n  };\n\n  // Find the nearest animal in the specified direction\n  const findNearestAnimal = direction => {\n    const currentAnimal = randomizedAnimals[selectedIndex];\n    let nearestIndex = selectedIndex;\n    let minDistance = Infinity;\n    randomizedAnimals.forEach((animal, index) => {\n      if (index === selectedIndex) return;\n      let distance;\n      switch (direction) {\n        case \"up\":\n          if (animal.top < currentAnimal.top) {\n            distance = currentAnimal.top - animal.top;\n            if (distance < minDistance) {\n              minDistance = distance;\n              nearestIndex = index;\n            }\n          }\n          break;\n        case \"down\":\n          if (animal.top > currentAnimal.top) {\n            distance = animal.top - currentAnimal.top;\n            if (distance < minDistance) {\n              minDistance = distance;\n              nearestIndex = index;\n            }\n          }\n          break;\n        case \"left\":\n          if (animal.left < currentAnimal.left) {\n            distance = currentAnimal.left - animal.left;\n            if (distance < minDistance) {\n              minDistance = distance;\n              nearestIndex = index;\n            }\n          }\n          break;\n        case \"right\":\n          if (animal.left > currentAnimal.left) {\n            distance = animal.left - currentAnimal.left;\n            if (distance < minDistance) {\n              minDistance = distance;\n              nearestIndex = index;\n            }\n          }\n          break;\n        default:\n          break;\n      }\n    });\n    return nearestIndex;\n  };\n\n  // Handle keyboard navigation\n  const handleKeyDown = event => {\n    if (randomizedAnimals.length === 0) return;\n    let newIndex = selectedIndex;\n    switch (event.key) {\n      case \"ArrowUp\":\n        newIndex = findNearestAnimal(\"up\");\n        break;\n      case \"ArrowDown\":\n        newIndex = findNearestAnimal(\"down\");\n        break;\n      case \"ArrowLeft\":\n        newIndex = findNearestAnimal(\"left\");\n        break;\n      case \"ArrowRight\":\n        newIndex = findNearestAnimal(\"right\");\n        break;\n      case \"Enter\":\n        if (onAnimalSelect) onAnimalSelect(randomizedAnimals[selectedIndex]); // Trigger callback for selected animal\n        break;\n      default:\n        return;\n    }\n    setSelectedIndex(newIndex);\n  };\n  useEffect(() => {\n    randomizePositions();\n  }, [refreshPositions]);\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [selectedIndex, randomizedAnimals]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"animal-grid-rectangle\",\n    children: randomizedAnimals.map((animal, idx) => /*#__PURE__*/_jsxDEV(\"img\", {\n      src: animal.image,\n      alt: animal.name,\n      className: `animal-image-${idx + 1}`,\n      style: {\n        position: \"absolute\",\n        top: `${animal.top}%`,\n        left: `${animal.left}%`,\n        transform: \"translate(-50%, -50%)\",\n        border: idx === selectedIndex ? \"3px solid red\" : \"none\",\n        // Highlight the selected animal\n        cursor: \"pointer\"\n      }\n    }, animal.name, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this);\n}\n_s(AnimalGrid, \"KQFswuh+Z/uSvxATnVOV68rZOb8=\");\n_c = AnimalGrid;\nvar _c;\n$RefreshReg$(_c, \"AnimalGrid\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","AnimalGrid","animals","refreshPositions","onAnimalSelect","_s","randomizedAnimals","setRandomizedAnimals","selectedIndex","setSelectedIndex","isOverlapping","newAnimal","existingAnimals","buffer","some","animal","distanceX","Math","abs","left","distanceY","top","randomizePositions","randomized","forEach","attempts","random","push","findNearestAnimal","direction","currentAnimal","nearestIndex","minDistance","Infinity","index","distance","handleKeyDown","event","length","newIndex","key","window","addEventListener","removeEventListener","className","children","map","idx","src","image","alt","name","style","position","transform","border","cursor","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/tyronemarhguy/Desktop/Color-Comm-Game-Psych-Experiment/src/components/AnimalGrid.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nexport default function AnimalGrid({ animals, refreshPositions, onAnimalSelect }) {\n  const [randomizedAnimals, setRandomizedAnimals] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(0); // Track the currently selected animal\n\n  // Helper function to check if two positions overlap\n  const isOverlapping = (newAnimal, existingAnimals, buffer = 10) => {\n    return existingAnimals.some((animal) => {\n      const distanceX = Math.abs(newAnimal.left - animal.left);\n      const distanceY = Math.abs(newAnimal.top - animal.top);\n      return distanceX < buffer && distanceY < buffer; // Check if bounding boxes overlap\n    });\n  };\n\n  // Function to randomize positions of animals without overlaps\n  const randomizePositions = () => {\n    const randomized = [];\n    animals.forEach((animal) => {\n      let newAnimal;\n      let attempts = 0;\n      do {\n        newAnimal = {\n          ...animal,\n          top: Math.random() * 80 + 10, // Random top position (10% to 90%)\n          left: Math.random() * 80 + 10, // Random left position (10% to 90%)\n        };\n        attempts++;\n      } while (isOverlapping(newAnimal, randomized) && attempts < 100); // Retry if overlapping\n      randomized.push(newAnimal);\n    });\n    setRandomizedAnimals(randomized);\n  };\n\n  // Find the nearest animal in the specified direction\n  const findNearestAnimal = (direction) => {\n    const currentAnimal = randomizedAnimals[selectedIndex];\n    let nearestIndex = selectedIndex;\n    let minDistance = Infinity;\n\n    randomizedAnimals.forEach((animal, index) => {\n      if (index === selectedIndex) return;\n\n      let distance;\n      switch (direction) {\n        case \"up\":\n          if (animal.top < currentAnimal.top) {\n            distance = currentAnimal.top - animal.top;\n            if (distance < minDistance) {\n              minDistance = distance;\n              nearestIndex = index;\n            }\n          }\n          break;\n        case \"down\":\n          if (animal.top > currentAnimal.top) {\n            distance = animal.top - currentAnimal.top;\n            if (distance < minDistance) {\n              minDistance = distance;\n              nearestIndex = index;\n            }\n          }\n          break;\n        case \"left\":\n          if (animal.left < currentAnimal.left) {\n            distance = currentAnimal.left - animal.left;\n            if (distance < minDistance) {\n              minDistance = distance;\n              nearestIndex = index;\n            }\n          }\n          break;\n        case \"right\":\n          if (animal.left > currentAnimal.left) {\n            distance = animal.left - currentAnimal.left;\n            if (distance < minDistance) {\n              minDistance = distance;\n              nearestIndex = index;\n            }\n          }\n          break;\n        default:\n          break;\n      }\n    });\n\n    return nearestIndex;\n  };\n\n  // Handle keyboard navigation\n  const handleKeyDown = (event) => {\n    if (randomizedAnimals.length === 0) return;\n\n    let newIndex = selectedIndex;\n    switch (event.key) {\n      case \"ArrowUp\":\n        newIndex = findNearestAnimal(\"up\");\n        break;\n      case \"ArrowDown\":\n        newIndex = findNearestAnimal(\"down\");\n        break;\n      case \"ArrowLeft\":\n        newIndex = findNearestAnimal(\"left\");\n        break;\n      case \"ArrowRight\":\n        newIndex = findNearestAnimal(\"right\");\n        break;\n      case \"Enter\":\n        if (onAnimalSelect) onAnimalSelect(randomizedAnimals[selectedIndex]); // Trigger callback for selected animal\n        break;\n      default:\n        return;\n    }\n    setSelectedIndex(newIndex);\n  };\n\n  useEffect(() => {\n    randomizePositions();\n  }, [refreshPositions]);\n\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [selectedIndex, randomizedAnimals]);\n\n  return (\n    <div className=\"animal-grid-rectangle\">\n      {randomizedAnimals.map((animal, idx) => (\n        <img\n          key={animal.name}\n          src={animal.image}\n          alt={animal.name}\n          className={`animal-image-${idx + 1}`}\n          style={{\n            position: \"absolute\",\n            top: `${animal.top}%`,\n            left: `${animal.left}%`,\n            transform: \"translate(-50%, -50%)\",\n            border: idx === selectedIndex ? \"3px solid red\" : \"none\", // Highlight the selected animal\n            cursor: \"pointer\",\n          }}\n        />\n      ))}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}